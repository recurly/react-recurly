{"version":3,"file":"useRecurly-ee223fab.js","sources":["../../../docs/2-hooks/useRecurly.mdx"],"sourcesContent":["import { Meta, Subtitle } from '@storybook/addon-docs/blocks';\n\n<Meta title=\"Hooks/useRecurly\" />\n\n# useRecurly\n\n`import { useRecurly } from '@recurly/react-recurly';`\n\nUse this [hook][react-hooks] to access a Recurly instance.\n\n## Getting a token\n\nWhen a user submits your checkout form, use this hook to submit their card information securely to Recurly. We will generate a token, and return that token to you. You will then send this token to your server, and [use it in the Recurly API][using-a-token] to store or charge your user's credit card.\n\n`useRecurly()` will return a `recurly.js` instance on which you will call `recurly.token`. Create a ref to your payment form using [`React.useRef`][react-refs], and pass this ref to `recurly.token`.\n\n```jsx\nimport { CardElement, useRecurly } from '@recurly/react-recurly';\n\nexport function MyCardForm (props) {\n  const recurly = useRecurly();\n  const formRef = React.useRef();\n\n  const handleSubmit = event => {\n    if (event.preventDefault) event.preventDefault();\n    recurly.token(formRef.current, (err, token) => {\n      if (err) console.log('[error]', err);\n      else console.log('[token]', token);\n    });\n  };\n\n  return (\n    <form onSubmit={handleSubmit} ref={formRef}>\n      <input type=\"text\" data-recurly=\"first_name\" />\n      <input type=\"text\" data-recurly=\"last_name\" />\n      <CardElement onSubmit={handleSubmit} />\n      <button>Submit</button>\n    </form>\n  );\n}\n```\n\n## Extended usage example: PayPal\n\n`useRecurly` can be used to expose any functionality in [Recurly-js][recurly-js].\n\nThe example below shows how to use `useRecurly` to interact with the [Recurly-js PayPal API][paypal].\n\n```jsx\nconst PayPalButton = () => {\n  const recurly = useRecurly();\n  const payPal = recurly.PayPal();\n\n  useEffect(() => {\n    payPal.on('token', token => {\n      console.log('Token: ', token);\n    });\n\n    payPal.on('error', error => {\n      throw error;\n    });\n\n    payPal.on('cancel', () => {\n      console.log('Cancelled');\n    });\n\n    payPal.on('ready', () => {\n      console.log('Ready');\n    });\n  }, [payPal]);\n\n  const handleClick = () => {\n    payPal.start();\n  };\n\n  return <button onClick={handleClick}>Start Paypal</button>;\n};\n```\n\n[react-hooks]: https://reactjs.org/docs/hooks-intro.html\n[react-refs]: https://reactjs.org/docs/refs-and-the-dom.html\n[using-a-token]: https://developers.recurly.com/reference/recurly-js/#using-a-token\n[recurly-js]: https://developers.recurly.com/reference/recurly-js/index.html\n[paypal]: https://developers.recurly.com/reference/recurly-js/index.html#paypal\n"],"names":["_createMdxContent","props","_components","_provideComponents","_jsxs","_Fragment","_jsx","Meta","MDXContent","MDXLayout"],"mappings":"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"}